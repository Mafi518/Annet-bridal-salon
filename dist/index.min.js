let burger = document.querySelector('.menu-icon').onclick = function() {
    let menu = document.querySelector('.menu')
    this.classList.toggle('menu-icon__active')
    menu.classList.toggle('menu__active')
}

if (document.querySelector('.filter__menu-icon')) {
    const filterMenuIcon = document.querySelector('.filter__menu-icon').addEventListener('click', function() {
        const filterMenu = document.querySelector('.catalog__filter')
        this.classList.toggle('filter__menu-icon__active')
        filterMenu.classList.toggle('filter__menu-active')
        document.body.classList.toggle('scroll-lock')
    })
}


$(document).ready(function(){
    $('.new-positions__list').slick({
        dots: true,
        slidesToShow: 2,
        arrows: false
    });
});

$(document).ready(function(){
    $('.sales-position__list').slick({
        dots: true,
        slidesToShow: 2,
        arrows: false
    });
});

function setValid(field) {
    field.style.border = '1px solid #000'
    field.classList.remove('invalid')
    field.classList.add('valid')
}
function setInvalid(field) {
    field.classList.remove('valid')
    field.classList.add('invalid')
    field.style.border = '1px solid tomato'
}

function validateName() {
    const name = document.querySelector('#name')

    if(name.value.trim() === '') {
        setInvalid(name)
    } else if (name.value.trim().length < 2) {
        setInvalid(name)
    } else {
        setValid(name)
    }
}

function lastNameValidate() {
    const lastname = document.querySelector('#lastname')

    if(lastname.value.trim() === '') {
        setInvalid(lastname)
    } else if (lastname.value.trim().length < 2) {
        setInvalid(lastname)
    } else {
        setValid(lastname)
    }
}

function validatePhone() {
    const phone = document.querySelector('#phone')

    if(this.value.trim() === '') {
        setInvalid(phone)
    } else if (this.value.trim().length !== 11) {
        setInvalid(phone)
    } else if (!this.value.trim().match(/^[0-9]+$/)){
        setInvalid(phone)
    } else {
        setValid(phone)
    }
}

function validateEmail() {
    const email = document.querySelector('#e-mail')

    if(email.value.trim() === '') {
        setInvalid(email)
    } else if(!email.value.trim().match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)) {
        setInvalid(email)
    } else {
        setValid(email)
    }
}

function validateDate() {
    const orderDate = document.querySelector('#orderDate')

    if(orderDate.value.trim() === '') {
        setInvalid(orderDate)
    } else {
        setValid(orderDate)
    }
}

if (document.querySelector('.form')) {
    const name = document.querySelector('#name').addEventListener('focusout', validateName)

const phone = document.querySelector('#phone').addEventListener('focusout', validatePhone)

const email = document.querySelector('#e-mail').addEventListener('focusout', validateEmail)

const lastName = document.querySelector('#lastname').addEventListener('focusout', lastNameValidate)

const orderDate = document.querySelector('#orderDate').addEventListener('focusout', validateDate)


const submit = document.querySelector('#submit').addEventListener('click', e => {
    e.preventDefault()
    const name = document.querySelector('#name')
    const phone = document.querySelector('#phone')
    const email = document.querySelector('#e-mail')
    const lastName = document.querySelector('#lastname')
    const orderDate = document.querySelector('#orderDate')


    if(name.classList.contains('valid') && phone.classList.contains('valid') && email.classList.contains('valid') && lastName.classList.contains('valid') && orderDate.value != '') {
        const success = document.querySelector('.success__popup')
        success.style.opacity = 1
        success.style.display = 'block'
        const successBg = document.querySelector('.success__bg')
        successBg.style.opacity = 0.7
        successBg.style.zIndex = 5
        successBg.addEventListener('click', () => {
            success.style.opacity = 0
            success.style.display = 'none'
            successBg.style.opacity = 0
            successBg.style.zIndex = -1
        })
        console.log(orderDate);
    }
})
} else {}


if (document.querySelector('#range')) {
    let range = document.getElementById('range').addEventListener('mousemove', function() {
        let currentPrice = this.value
        document.querySelector('.current-price-max').innerHTML = (currentPrice)
    })
} else {}